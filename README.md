# shop-service


### 1. –ó–∞–ø—É—Å–∫:
```bash
make up
```


3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8080`

## API Endpoints

###  **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**
####  POST /auth/register ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- **Auth:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è  
- **Body:**
  ```json
  {
    "username": "string",
    "password": "string"
  }
  ```
#### POST /auth/login ‚Äî –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- **Auth:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è  
- **Body:**
  ```json
  {
    "username": "string",
    "password": "string"
  }
  ```
---
### **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
#### GET /api/info ‚Äî –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–Ω–µ—Ç–∞—Ö, –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π  
- **Auth:** –¢—Ä–µ–±—É–µ—Ç—Å—è (`Bearer Token` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization)  
- **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
  ```json
  {
    "coins": 1000,
    "inventory": [{"type": "item", "quantity": 2}],
    "coinHistory": {
      "received": [{"fromUser": "alice", "amount": 50}],
      "sent": [{"toUser": "bob", "amount": 30}]
    }
  }
  ```
---
###  **–ü–µ—Ä–µ–≤–æ–¥—ã:**
#### POST /api/transfer ‚Äî –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–æ–Ω–µ—Ç—ã –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é  
- **Auth:** –¢—Ä–µ–±—É–µ—Ç—Å—è  
- **Body:**
  ```json
  {
    "toUsername": "string",
    "amount": 100
  }
  ```
---
### **–ü–æ–∫—É–ø–∫–∏:**
#### GET /api/buy/{item} ‚Äî –ö—É–ø–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç –∑–∞ –º–æ–Ω–µ—Ç—ã  
- **Auth:** –¢—Ä–µ–±—É–µ—Ç—Å—è  
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - `item` (string) ‚Äî –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞  
- **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
  ```json
  {
    "message": "Item purchased successfully"
    "balance": 790
  }
  ```



## –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
‚úÖ **Unit-—Ç–µ—Å—Ç—ã**: repository (77%), usecase (44%) (–Ω–µ —É—Å–ø–µ–ª –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã —Å transaction manager mock), handlers (77.6%)  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç**: –ø–æ–∫—É–ø–∫–∞ –º–µ—Ä—á–∞



### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
```bash
make integration-test
```


docker compose  -f ./tests/integration/docker-compose.integration.yaml up -d 

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**  

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã  

#### üìÇ **–û—Å–Ω–æ–≤–Ω—ã–µ —Å–ª–æ–∏:**  
- **Handler:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã, –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥—ã usecase –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã.  
- **UseCase:** –°–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ó–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [Transaction Manager](https://github.com/avito-tech/go-transaction-manager) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏.  
- **Repository:** –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–∞–±–æ—Ç—É —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É—è [Squirrel](https://github.com/Masterminds/squirrel) –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤.  
- **Domain:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–∫–∏.  

#### **–ú–∞–ø–ø–µ—Ä—ã:**  
–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–ª–æ—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–∞–ø–ø–µ—Ä—ã


